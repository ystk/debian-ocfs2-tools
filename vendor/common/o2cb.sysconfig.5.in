.TH "/etc/sysconfig/o2cb" "5" "January 2012" "Version @VERSION@" "OCFS2 Manual Pages"
.SH "NAME"
/etc/sysconfig/o2cb \- Cluster configuration file for the \fBo2cb\fR cluster stack.
.SH "SYNOPSIS"
.PP 
The configuration file \fB/etc/sysconfig/o2cb\fR stores the active cluster stack,
its name and the various cluster timeouts for the \fBo2cb\fR cluster stack.

.SH "DESCRIPTION"
.PP
This file can be populated using the \fIo2cb\fR init script. An example of the same
is illustrated in the examples section.

The list of configurable parameters in this file are:

.TP
\fBO2CB_STACK\fR
Name of the cluster stack. The possible values are \fBo2cb\fR, \fBpcmk\fR and \fBcman\fR.
\fBo2cb\fR is the default cluster stack of the \fBOCFS2\fR file system. \fBpcmk\fR
(Pacemaker) and \fBcman\fR (rgmanager) are the two other cluster stacks that are
supported by the same file system.

.TP
\fBO2CB_BOOTCLUSTER\fR
Name of the active cluster. While /etc/ocfs2/cluster.conf can hold descriptions of
multiple clusters, only one can be active at any one time. The name of that
active cluster is specified here. The name itself can be upto 16 alphanumeric
characters [0-9A-Za-z] with no special characters.
.PP

The remaining configurable parameters (cluster timeouts) are only relevant for the
\fBo2cb\fR cluster stack. These cluster timeouts are used by the \fBo2cb\fR cluster
stack to determine whether a node is dead or alive. The default timeouts are just
a guide and may need to be tweaked depending on the hardware the software is running on.

The various \fIcluster timeouts\fR for the \fBo2cb\fR cluster stack are:
.TP
\fBO2CB_HEARTBEAT_THRESHOLD\fR
The disk heartbeat timeout is the number of two second iterations before a node is
considered dead. The exact formula used to convert the timeout in seconds to the
number of iterations is as follows:

.in +4n
O2CB_HEARTBEAT_THRESHOLD = (((timeout in seconds) / 2) + 1)
.in

For example, to specify a 60 sec timeout, set it to 31. For 120 secs, set it to 61.
The default for this timeout is 60 secs (O2CB_HEARTBEAT_THRESHOLD = 31).

While it defaults to 60 secs, multipath users typically set it to 120 secs.

.TP
\fBO2CB_IDLE_TIMEOUT_MS\fR
The network idle timeout specifies the time in milliseconds before a network connection
is considered dead. While it defaults to 30000 ms, network bonding users typically set it
to 60000 ms.

.TP
\fBO2CB_KEEPALIVE_DELAY_MS\fR
The network keepalive specifies the maximum delay in milliseconds before a keepalive
packet is sent to another node to check whether it is alive or not. It defaults to
2000 ms.

.TP
\fBO2CB_RECONNECT_DELAY_MS\fR
The network reconnect specifies the minimum delay in milliseconds between repeated
connect attempts. It defaults to 2000 ms.
.PP

.SH "EXAMPLE"
The example below illustrates populating the o2cb sysconfig file using the \fIo2cb\fR
init script.


.nf
.ps 9
.ft 6
$ service o2cb configure
Configuring the O2CB driver.

This will configure the on-boot properties of the O2CB driver.
The following questions will determine whether the driver is loaded on
boot.  The current values will be shown in brackets ('[]').  Hitting
<ENTER> without typing an answer will keep that current value.  Ctrl-C
will abort.

Load O2CB driver on boot (y/n) [n]: y
Cluster stack backing O2CB [o2cb]: 
Cluster to start on boot (Enter "none" to clear) [ocfs2]: webcluster
Specify heartbeat dead threshold (>=7) [31]: 62
Specify network idle timeout in ms (>=5000) [30000]: 60000
Specify network keepalive delay in ms (>=1000) [2000]: 
Specify network reconnect delay in ms (>=2000) [2000]: 
Writing O2CB configuration: OK


$ cat /etc/sysconfig/o2cb
#
# This is a configuration file for automatic startup of the O2CB
# driver.  It is generated by running /etc/init.d/o2cb configure.
# On Debian based systems the preferred method is running
# 'dpkg-reconfigure ocfs2-tools'.
#

# O2CB_ENABLED: 'true' means to load the driver on boot.
O2CB_ENABLED=true

# O2CB_STACK: The name of the cluster stack backing O2CB.
O2CB_STACK=o2cb

# O2CB_BOOTCLUSTER: If not empty, the name of a cluster to start.
O2CB_BOOTCLUSTER=webcluster

# O2CB_HEARTBEAT_THRESHOLD: Iterations before a node is considered dead.
O2CB_HEARTBEAT_THRESHOLD=62

# O2CB_IDLE_TIMEOUT_MS: Time in ms before a network connection is considered dead.
O2CB_IDLE_TIMEOUT_MS=60000

# O2CB_KEEPALIVE_DELAY_MS: Max time in ms before a keepalive packet is sent
O2CB_KEEPALIVE_DELAY_MS=2000

# O2CB_RECONNECT_DELAY_MS: Min time in ms between connection attempts
O2CB_RECONNECT_DELAY_MS=2000
.ft
.ps
.fi

.SH "SEE ALSO"
.BR o2cb(7)
.BR o2cb(8)
.BR ocfs2.cluster.conf(5)

.SH "AUTHORS"
Oracle Corporation

.SH "COPYRIGHT"
Copyright \(co 2004, 2012 Oracle. All rights reserved.
